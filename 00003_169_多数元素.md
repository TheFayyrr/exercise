# QUESTION
169. å¤šæ•°å…ƒç´ 
ç®€å•
ç›¸å…³æ ‡ç­¾
ç›¸å…³ä¼ä¸š
ç»™å®šä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ nums ï¼Œè¿”å›å…¶ä¸­çš„å¤šæ•°å…ƒç´ ã€‚å¤šæ•°å…ƒç´ æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºç°æ¬¡æ•° å¤§äº âŒŠ n/2 âŒ‹ çš„å…ƒç´ ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚

 

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [3,2,3]
è¾“å‡ºï¼š3
ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = [2,2,1,1,1,2,2]
è¾“å‡ºï¼š2

# wrong answer
'''
cpp
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        
        sort(nums.begin(),nums.end());
        int p=0;
        while (p<nums.size())
        {
            int count2 = count(nums.begin(), nums.end(), nums[p]);
            if(nums[p]>count2/2)
            {
                return nums[p];
            }
            p=count2;

        }
        
    }
};
'''

ä½ çš„ä»£ç çš„æ€è·¯æ˜¯ï¼š

1. å¯¹æ•°ç»„æ’åº
2. ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°
3. æ‰¾å‡ºå‡ºç°æ¬¡æ•° > âŒŠn/2âŒ‹ çš„æ•°

è¿™æ˜¯ä¸ªå¯è¡Œçš„æ€è·¯ï¼Œä½†ä½ ä»£ç ä¸­æœ‰å‡ ä¸ª**å…³é”®é—®é¢˜**å¯¼è‡´å®ƒå‡ºé”™ï¼ˆç”šè‡³å¯èƒ½æ®µé”™è¯¯æˆ–æ­»å¾ªç¯ï¼‰ã€‚

---

## âŒ å­˜åœ¨çš„é—®é¢˜

### â— 1. `count2 = count(...)` æ˜¯æ¯æ¬¡ç»Ÿè®¡æ•´ä¸ªæ•°ç»„ä¸­ `nums[p]` å‡ºç°çš„æ¬¡æ•°ï¼Œä½†ä½ æ²¡æœ‰ç§»åŠ¨ `p` æ­£ç¡®åœ°è·³è¿‡é‡å¤é¡¹

æ¯”å¦‚ï¼šä½ æƒ³è·³è¿‡æ‰€æœ‰ç›¸åŒçš„ `nums[p]`ï¼Œä½†ä½ é”™è¯¯åœ°å°† `p = count2`ï¼Œè¿™å¯èƒ½ä¼šè·³é”™ä½ç½®ã€‚

### â— 2. åˆ¤æ–­æ¡ä»¶ `if (nums[p] > count2 / 2)` æ˜¯é”™è¯¯çš„

åº”è¯¥æ˜¯ **`if (count2 > nums.size() / 2)`**ï¼Œä½ ç°åœ¨æ¯”è¾ƒçš„æ˜¯ `å…ƒç´ å€¼` ä¸ `å‡ºç°æ¬¡æ•°`ï¼Œè¯­ä¹‰ä¸å¯¹ã€‚

### â— 3. å‡½æ•°æ²¡æœ‰ `return` é»˜è®¤å€¼ï¼ˆè‹¥é€»è¾‘æ²¡è¿›å…¥ `if` å°±æ²¡æœ‰è¿”å›ï¼Œä¼šæŠ¥é”™ï¼‰

---

## âœ… ä¿®æ­£ç‰ˆï¼šåŸºäºä½ åŸå§‹æ€è·¯è¿›è¡Œæ›´æ­£

```cpp
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        sort(nums.begin(), nums.end()); // æ’åºåï¼Œç›¸åŒå…ƒç´ ä¼šç›¸é‚»
        int n = nums.size();
        int p = 0;

        while (p < n) {
            int current = nums[p];
            int count2 = count(nums.begin(), nums.end(), current);
            if (count2 > n / 2) {
                return current;
            }
            // è·³è¿‡å½“å‰å…ƒç´ çš„æ‰€æœ‰é‡å¤é¡¹
            while (p < n && nums[p] == current) {
                p++;
            }
        }

        return -1; // å®é™…ä¸ä¼šåˆ°è¾¾è¿™é‡Œï¼Œå› ä¸ºé¢˜ç›®ä¿è¯ä¸€å®šæœ‰å¤šæ•°å…ƒç´ 
    }
};
```

---

## âœ… æ›´é«˜æ•ˆçš„æ–¹æ³•ï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•ï¼ˆæ¨èï¼‰

æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´ O(1)

```cpp
class Solution {
public:
    int majorityElement(vector<int>& nums) {
        int count = 0;
        int candidate = 0;

        for (int num : nums) {
            if (count == 0) {
                candidate = num;
            }
            count += (num == candidate) ? 1 : -1;
        }

        return candidate;
    }
};
```

---

## âœ… æ€»ç»“

| æ–¹æ³•          | æ—¶é—´å¤æ‚åº¦      | ç©ºé—´å¤æ‚åº¦ | ç‰¹ç‚¹          |
| ----------- | ---------- | ----- | ----------- |
| æ’åº+éå†+count | O(n log n) | O(1)  | ç®€å•ä½†å¤šæ¬¡ç»Ÿè®¡é‡å¤å…ƒç´  |
| æŠ•ç¥¨ç®—æ³•        | O(n)       | O(1)  | é«˜æ•ˆï¼Œæœ€æ¨è      |

å¦‚æœä½ å¸Œæœ›ç”¨ `map` æˆ– `unordered_map` æ¥åšç»Ÿè®¡ï¼Œæˆ‘ä¹Ÿå¯ä»¥å†™å‡ºå¯¹åº”ä»£ç ã€‚æ˜¯å¦æƒ³çœ‹ï¼Ÿ
# é¢˜è§£
å¾ˆå¥½ï¼æˆ‘ä»¬æ¥è¯¦ç»†è®²ä¸¤ä¸ªéƒ¨åˆ†ï¼š

---

## âœ… ç¬¬ä¸€éƒ¨åˆ†ï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•çš„åŸç†

è¿™ä¸ªç®—æ³•ç‰¹åˆ«é€‚åˆè§£å†³ â€œå¤šæ•°å…ƒç´ â€ é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ **O(n)**ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ **O(1)**ã€‚

### **æ ¸å¿ƒæ€æƒ³ï¼š**

* å¦‚æœä¸€ä¸ªæ•°æ˜¯**å¤šæ•°å…ƒç´ **ï¼Œå®ƒçš„æ•°é‡ä¸€å®š > æ‰€æœ‰å…¶ä»–å…ƒç´ æ•°é‡çš„æ€»å’Œã€‚
* æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå˜é‡ `count` æ¥åšâ€œæŠ•ç¥¨â€ï¼š

  * å½“ `count == 0`ï¼Œå°±æ›´æ–°å€™é€‰äºº `candidate = å½“å‰æ•°`
  * å¦‚æœå½“å‰æ•°ç­‰äº `candidate`ï¼Œ`count++`
  * å¦‚æœå½“å‰æ•°ä¸ç­‰äº `candidate`ï¼Œ`count--`
* éå†ä¸€è½®ä¸‹æ¥ï¼Œ`candidate` å°±æ˜¯æœ€ç»ˆçš„å¤šæ•°å…ƒç´ ã€‚

### **ä¾‹å­ï¼š**

æ•°ç»„ `[2,2,1,1,1,2,2]`

```
candidate=2, count=1
â†’ 2 == 2 â†’ count=2
â†’ 1 != 2 â†’ count=1
â†’ 1 != 2 â†’ count=0
â†’ count=0 â†’ candidate=1
â†’ 1 == 1 â†’ count=1
â†’ 2 != 1 â†’ count=0
â†’ count=0 â†’ candidate=2
â†’ 2 == 2 â†’ count=1 â†’ âœ… æœ€ç»ˆç»“æœï¼š2
```

---

## âœ… ç¬¬äºŒéƒ¨åˆ†ï¼šå“ˆå¸Œè¡¨è§£æ³•ï¼ˆä½¿ç”¨ `unordered_map`ï¼‰

æ˜¯çš„ï¼Œè¿™å°±æ˜¯**å“ˆå¸Œè¡¨**æ–¹æ³•ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª map æ¥è®°å½•æ¯ä¸ªæ•°å‡ºç°äº†å¤šå°‘æ¬¡ã€‚

### ğŸ”‘ `unordered_map` æ˜¯æ— åºå“ˆå¸Œè¡¨ï¼ŒæŸ¥æ‰¾/æ’å…¥éƒ½æ˜¯ O(1) çš„å¹³å‡å¤æ‚åº¦ã€‚

### âœ… ç¤ºä¾‹ä»£ç ï¼š

```cpp
#include <iostream>
#include <vector>
#include <unordered_map>
using namespace std;

class Solution {
public:
    int majorityElement(vector<int>& nums) {
        unordered_map<int, int> freq;
        int n = nums.size();

        for (int num : nums) {
            freq[num]++; // æ¯å‡ºç°ä¸€æ¬¡å°±åŠ ä¸€
            if (freq[num] > n / 2) {
                return num;
            }
        }

        return -1; // ç†è®ºä¸Šä¸ä¼šåˆ°è¿™é‡Œ
    }
};
```

### ğŸ“Œ è§£é‡Šï¼š

* `unordered_map<int, int> freq`ï¼šå»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œkey æ˜¯æ•°å€¼ï¼Œvalue æ˜¯å‡ºç°æ¬¡æ•°ã€‚
* æ¯æ¬¡ `freq[num]++` éƒ½åœ¨ç»Ÿè®¡å½“å‰æ•°çš„å‡ºç°æ¬¡æ•°ã€‚
* å¦‚æœå‘ç°æŸä¸ªæ•°è¶…è¿‡ `n / 2` æ¬¡ï¼Œå°±ç›´æ¥è¿”å›ã€‚

---

## âœ… æ€»ç»“å¯¹æ¯”ï¼š

| æ–¹æ³•          | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | ç‰¹ç‚¹      |
| ----------- | ----- | ----- | ------- |
| Boyer-Moore | O(n)  | O(1)  | æœ€ä¼˜ï¼Œé€»è¾‘å·§å¦™ |
| å“ˆå¸Œè¡¨ï¼ˆmapï¼‰    | O(n)  | O(n)  | ç®€å•æ˜“æ‡‚    |

---

å¦‚æœä½ è¿˜ä¸å¤ªä¼šä½¿ç”¨ `unordered_map` æˆ– `map` çš„åŸºæœ¬æ“ä½œï¼Œæˆ‘å¯ä»¥å•ç‹¬ä¸ºä½ æ•´ç†ä¸€ä»½**C++ å“ˆå¸Œè¡¨å…¥é—¨è®²è§£ä¸ä¾‹å­**ã€‚éœ€è¦å—ï¼Ÿ

