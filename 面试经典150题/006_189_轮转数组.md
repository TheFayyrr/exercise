# 189. è½®è½¬æ•°ç»„
189. è½®è½¬æ•°ç»„
å·²è§£ç­”
ä¸­ç­‰
ç›¸å…³æ ‡ç­¾
ç›¸å…³ä¼ä¸š
æç¤º
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³è½®è½¬ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°ã€‚

 

ç¤ºä¾‹ 1:

è¾“å…¥: nums = [1,2,3,4,5,6,7], k = 3
è¾“å‡º: [5,6,7,1,2,3,4]
è§£é‡Š:
å‘å³è½®è½¬ 1 æ­¥: [7,1,2,3,4,5,6]
å‘å³è½®è½¬ 2 æ­¥: [6,7,1,2,3,4,5]
å‘å³è½®è½¬ 3 æ­¥: [5,6,7,1,2,3,4]
ç¤ºä¾‹ 2:

è¾“å…¥ï¼šnums = [-1,-100,3,99], k = 2
è¾“å‡ºï¼š[3,99,-1,-100]
è§£é‡Š: 
å‘å³è½®è½¬ 1 æ­¥: [99,-1,-100,3]
å‘å³è½®è½¬ 2 æ­¥: [3,99,-1,-100]
 

æç¤ºï¼š

1 <= nums.length <= 105
-231 <= nums[i] <= 231 - 1
0 <= k <= 105
 

è¿›é˜¶ï¼š

å°½å¯èƒ½æƒ³å‡ºæ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘æœ‰ ä¸‰ç§ ä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
ä½ å¯ä»¥ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º O(1) çš„ åŸåœ° ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ






ä½ å†™çš„ C++ ä»£ç è¯•å›¾å®ç°å°†æ•°ç»„å‘å³è½®è½¬ `k` ä½çš„åŠŸèƒ½ï¼Œä½†å½“å‰å­˜åœ¨ **è¿è¡Œæ—¶é”™è¯¯**ï¼Œå› ä¸ºä½ åœ¨ä½¿ç”¨ `result[j + k % n] = nums[j];` æ—¶ `result` è¿˜æœªåˆ†é…å¤§å°ï¼Œå¯¼è‡´è¶Šç•Œè®¿é—®ã€‚

ä¸‹é¢æ˜¯æ”¹æ­£åçš„ç‰ˆæœ¬ï¼Œä»¥åŠä¸€ç§æ›´ç®€æ´é«˜æ•ˆçš„**ä¸‰æ¬¡ç¿»è½¬æ³•**å†™æ³•ã€‚

---

## âœ… ä¿®æ­£ä½ çš„ä»£ç ç‰ˆæœ¬

```cpp
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k = k % n;
        if (k == 0) return;

        vector<int> result(n);  // å…ˆåˆ†é…å¤§å°
        for (int j = 0; j < n; ++j) {
            result[(j + k) % n] = nums[j];  // è®¡ç®—æ–°ä½ç½®
        }

        for (int i = 0; i < n; ++i) {
            nums[i] = result[i];  // æ‹·è´å›åŸæ•°ç»„
        }
    }
};
```

---

## âœ… æ¨èï¼šä½¿ç”¨ **ä¸‰æ¬¡ç¿»è½¬æ³•**ï¼ˆç©ºé—´å¤æ‚åº¦ O(1)ï¼‰

```cpp
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k %= n;
        if (k == 0) return;

        // ä¸‰æ­¥ç¿»è½¬
        reverse(nums.begin(), nums.end());         // åè½¬æ•´ä¸ªæ•°ç»„
        reverse(nums.begin(), nums.begin() + k);   // åè½¬å‰ k ä¸ª
        reverse(nums.begin() + k, nums.end());     // åè½¬å‰©ä½™çš„
    }
};
```

### âœ… æ—¶é—´å¤æ‚åº¦ï¼š`O(n)`

### âœ… ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`

---

## ç¤ºä¾‹è§£é‡Šï¼š

```txt
nums = [1,2,3,4,5,6,7], k = 3
ä¸‰æ¬¡ç¿»è½¬ï¼š
1. å…¨éƒ¨ç¿»è½¬       -> [7,6,5,4,3,2,1]
2. ç¿»è½¬å‰3ä¸ª      -> [5,6,7,4,3,2,1]
3. ç¿»è½¬å‰©ä½™éƒ¨åˆ†   -> [5,6,7,1,2,3,4]
```

---

å¦‚æœä½ è¿˜æƒ³äº†è§£æ›´é«˜æ•ˆçš„æ–¹æ³•ï¼ˆæ¯”å¦‚å¾ªç¯äº¤æ¢æ³•ï¼‰ï¼Œä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ï¼
# error
// class Solution {
// public:
//     void rotate(vector<int>& nums, int k) {
//         int n=nums.size();
//         k=k%n;
//         if(k==0)
//         {
//             return ;
//         }
//         vector<int>result(n);
//         for (int j=0;j<n;j++)
//         {
//             result[(j+k)%n]=nums[j];
//         }  
//             for (int i;i<n;i++)
// {
//     nums[i]=result[i];
// }
//     }      
// };
ä¸ºå•¥è¿™æ ·å†™ä¹Ÿä¸å¯¹å•Š
# chatgpt
ä½ è¿™æ®µæ³¨é‡Šæ‰çš„ä»£ç è™½ç„¶å¤§ä½“é€»è¾‘æ­£ç¡®ï¼Œä½†æœ‰ä¸¤ä¸ªå°é—®é¢˜å¯èƒ½ä¼šå¯¼è‡´ **è¿è¡Œæ—¶é”™è¯¯æˆ–æœªå®šä¹‰è¡Œä¸º**ï¼Œæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ï¼š

---

### â—é—®é¢˜1ï¼š`for (int i; i < n; i++)` ä¸­çš„ `i` **æœªåˆå§‹åŒ–**

è¿™ä¸€å¥ï¼š

```cpp
for (int i; i < n; i++)
```

ä½ **å£°æ˜äº†å˜é‡ `i`ï¼Œä½†æ²¡æœ‰åˆå§‹åŒ–å®ƒçš„å€¼**ï¼Œ`i` çš„å€¼æ˜¯**æœªå®šä¹‰çš„éšæœºå€¼**ï¼Œè¿™ä¼šå¯¼è‡´å¾ªç¯ä½“**å¯èƒ½æ ¹æœ¬ä¸æ‰§è¡Œï¼Œæˆ–è€…è¶…èŒƒå›´è®¿é—®**ã€‚

ğŸ›  **æ­£ç¡®å†™æ³•åº”è¯¥æ˜¯ï¼š**

```cpp
for (int i = 0; i < n; i++)
```

---

### â—é—®é¢˜2ï¼šè™½ç„¶è¿™æ®µä»£ç æ•´ä½“æ˜¯å¯¹çš„ï¼Œä½†ä½ æ³¨é‡Šäº†å®ƒï¼Œ**å®é™…è¿è¡Œçš„æ˜¯é”™è¯¯ç‰ˆæœ¬**ï¼Ÿ

ç¡®ä¿ä½ è¿è¡Œçš„æ˜¯è¿™ä¸€ç‰ˆæœ¬ï¼š

```cpp
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k = k % n;
        if (k == 0) return;

        vector<int> result(n);
        for (int j = 0; j < n; j++) {
            result[(j + k) % n] = nums[j];
        }

        for (int i = 0; i < n; i++) {
            nums[i] = result[i];
        }
    }
};
```

---

### âœ… æ€»ç»“ï¼š

| é—®é¢˜              | æè¿°                     | ä¿®æ”¹å»ºè®®             |
| --------------- | ---------------------- | ---------------- |
| âŒ `int i;` æœªåˆå§‹åŒ– | `i` æ˜¯åƒåœ¾å€¼ï¼Œå¯¼è‡´é€»è¾‘é”™è¯¯æˆ–è¶Šç•Œ     | âœ… æ”¹æˆ `int i = 0` |
| âŒ å¯èƒ½æ²¡è¿è¡Œè¿™æ®µä»£ç      | å¯èƒ½æ³¨é‡Šæ‰äº†æ­£ç¡®ç‰ˆæœ¬ï¼Œè¿è¡Œçš„æ˜¯é”™çš„      | âœ… ç¡®ä¿è¿è¡Œä¿®æ­£åçš„ä»£ç      |
| âœ… å…¶ä»–é€»è¾‘æ²¡é—®é¢˜       | ä½¿ç”¨äº†è¾…åŠ©æ•°ç»„ result æ­£ç¡®ä¿å­˜æ–°é¡ºåº | -                |

---

å¦‚ä½ éœ€è¦ç©ºé—´å¤æ‚åº¦ä¸º `O(1)` çš„è§£æ³•ï¼Œæ¨èâ€œä¸‰æ¬¡ç¿»è½¬æ³•â€ï¼Œä½†ä½ å½“å‰è¿™ç‰ˆä¿®å¤åå·²ç»å¯ä»¥é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹äº†ã€‚éœ€è¦æˆ‘å¸®ä½ æµ‹ä¸€ä¸ª LeetCode çš„æµ‹è¯•ç‚¹ä¹Ÿå¯ä»¥è¯´ã€‚







# ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå°†å…ƒç´ ç§»åŠ¨åˆ°è¯¥ç§»åŠ¨çš„ä½ç½®åï¼Œèµ‹å€¼å†èµ‹å€¼å›å»
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k = k % n;
        if (k == 0) return;

        vector<int> result(n);  // å…ˆåˆ†é…å¤§å°
        for (int j = 0; j < n; ++j) {
            result[(j + k) % n] = nums[j];  // è®¡ç®—æ–°ä½ç½®
        }

        for (int i = 0; i < n; ++i) {
            nums[i] = result[i];  // æ‹·è´å›åŸæ•°ç»„
        }
    }
};
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n=nums.size();
        k=k%n;
        if(k==0)
        {
            return ;
        }
        vector<int>result(n);
        for (int j=0;j<n;j++)
        {
            result[(j+k)%n]=nums[j];
        }  
            for (int i=0;i<n;i++)
{
    nums[i]=result[i];
}
    }      
};
# é«˜æ•ˆ
å¾ˆå¥½ï¼é™¤äº†â€œä¸‰æ¬¡ç¿»è½¬æ³•â€è¿™ç§**ç©ºé—´å¤æ‚åº¦ O(1)** çš„æ–¹å¼å¤–ï¼Œè¿˜æœ‰ä¸€ç§ä¹Ÿéå¸¸ç»å…¸ä¸”**åŸåœ°ä¿®æ”¹**çš„æ–¹æ³•ï¼Œå«åš **å¾ªç¯äº¤æ¢æ³•ï¼ˆCycle Replacementï¼‰**ã€‚å®ƒåŒæ ·æ˜¯ O(1) ç©ºé—´å¤æ‚åº¦ï¼Œä¸”é€‚åˆä½ äº†è§£æ›´æ·±å…¥çš„æ•°ç»„æ“ä½œã€‚

---

## âœ… æ–¹æ³•äºŒï¼šå¾ªç¯äº¤æ¢æ³•ï¼ˆCycle Replacementï¼‰

### ğŸš€ æ€è·¯ï¼š

æˆ‘ä»¬é€ä¸ªæŠŠå…ƒç´ æ”¾åˆ°å®ƒâ€œåº”è¯¥å»çš„ä½ç½®â€ï¼Œä½†ä¸èƒ½ç›´æ¥äº¤æ¢ï¼Œå› ä¸ºåŸä½ç½®çš„æ•°æ®ä¼šä¸¢å¤±ã€‚æˆ‘ä»¬å¿…é¡»é€šè¿‡â€œç¯å½¢æ›¿æ¢â€çš„æ–¹å¼æ¥å®Œæˆã€‚

---

### âœï¸ ä»£ç å®ç°ï¼š

```cpp
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k %= n;
        if (k == 0 || n <= 1) return;

        int count = 0; // å·²ç»ç§»åŠ¨çš„å…ƒç´ ä¸ªæ•°
        for (int start = 0; count < n; ++start) {
            int current = start;
            int prev = nums[start];

            do {
                int next = (current + k) % n;
                int temp = nums[next];
                nums[next] = prev;
                prev = temp;
                current = next;
                count++;
            } while (start != current);  // å›åˆ°èµ·ç‚¹åˆ™ç»“æŸè¿™ä¸ªç¯
        }
    }
};
```

---

### ğŸ” ä¸¾ä¸ªä¾‹å­

ä»¥ `nums = [1,2,3,4,5,6,7]`ï¼Œ`k = 3` ä¸ºä¾‹ï¼š

```
åŸæ•°ç»„:        [1, 2, 3, 4, 5, 6, 7]
ç´¢å¼•:           0  1  2  3  4  5  6
ç›®æ ‡ä½ç½®:       3  4  5  6  0  1  2
```

æˆ‘ä»¬ä» `0` å¼€å§‹ï¼ŒæŠŠ `nums[0]` ç§»åŠ¨åˆ° `nums[3]`ï¼Œç„¶åå†æŠŠåŸæ¥çš„ `nums[3]` ç§»åˆ° `nums[6]`ï¼Œå¦‚æ­¤åå¤ï¼Œç›´åˆ°è¿™ä¸ªå¾ªç¯å›åˆ°äº† `0`ã€‚ç„¶åä»ä¸‹ä¸€ä¸ªæœªå¤„ç†çš„ç‚¹å¼€å§‹æ–°ä¸€è½®å¾ªç¯ã€‚

---

### ğŸ§  æ—¶é—´å¤æ‚åº¦ï¼š

* **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n)`
* **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œ**æ— è¾…åŠ©æ•°ç»„**

---

### âœ… æ¯”è¾ƒä¸‰ç§æ–¹æ³•ï¼š

| æ–¹æ³•           | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ˜¯å¦åŸåœ°æ“ä½œ | è¯´æ˜           |
| ------------ | ----- | ----- | ------ | ------------ |
| è¾…åŠ©æ•°ç»„å¤åˆ¶æ³•      | O(n)  | O(n)  | å¦      | ç®€å•ä½†ç”¨äº†é¢å¤–ç©ºé—´    |
| ä¸‰æ¬¡ç¿»è½¬æ³•        | O(n)  | O(1)  | âœ…      | ç®€æ´é«˜æ•ˆï¼Œæ¨èä½¿ç”¨    |
| å¾ªç¯äº¤æ¢æ³•ï¼ˆCycleï¼‰ | O(n)  | O(1)  | âœ…      | æ›´åº•å±‚ï¼Œæ›´èƒ½ç†è§£æ•°ç»„ç»“æ„ |

---

å¦‚ä½ æƒ³åšå¼ºåŒ–è®­ç»ƒï¼Œå¯ä»¥å°è¯•**è‡ªå·±ç”»å›¾æ¼”ç¤ºå¾ªç¯è¿‡ç¨‹**ã€‚æˆ‘ä¹Ÿå¯ä»¥ç”¨ ASCII æˆ– Python æ¨¡æ‹Ÿä¸€ä¸‹è¿‡ç¨‹ï¼Œå‘Šè¯‰ä½ æ¯ä¸€æ­¥æ˜¯å¦‚ä½•å˜æ¢çš„ã€‚éœ€è¦çš„è¯å°±å‘Šè¯‰æˆ‘ ğŸ˜„
# error

ä½ çš„è¿™æ®µä»£ç è¯•å›¾ç”¨ä¸€ä¸ª `unordered_map<int, int>` æ¥è®°å½•æ•°ç»„ä¸‹æ ‡çš„æ˜ å°„å…³ç³»ï¼Œç„¶åå†åšèµ‹å€¼æ“ä½œï¼š

```cpp
nums[haha[j]] = nums[j];
```

ä½†æ˜¯ä¼šå‡ºé”™ï¼ŒåŸå› æœ‰ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

---

## â—é—®é¢˜1ï¼šä¿®æ”¹ `nums` çš„åŒæ—¶è¯»å–å®ƒ â€”â€” **ä¼šè¦†ç›–åŸå§‹å€¼**

ä½ åœ¨ä¸‹é¢è¿™ä¸ªå¾ªç¯ä¸­ï¼š

```cpp
for (int j = 0; j < n; j++) {
    nums[haha[j]] = nums[j];
}
```

æ¯æ¬¡éƒ½åœ¨**è¯» `nums[j]` çš„åŒæ—¶å†™ `nums[haha[j]]`**ï¼Œè¿™ä¼šé€ æˆè¦†ç›–é—®é¢˜ï¼Œå¯¼è‡´éƒ¨åˆ†åŸå§‹å€¼è¢«æå‰æ”¹å†™ï¼Œæœ€åæ•´ä½“ç»“æœæ˜¯é”™çš„ã€‚

---

### ğŸ§  ä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼š

å‡è®¾ï¼š

```cpp
nums = [1, 2, 3, 4, 5, 6, 7], k = 3
```

ä½ çš„ `haha` æ˜ å°„è¡¨å¤§æ¦‚æ˜¯ï¼š

```
0 â†’ 3
1 â†’ 4
2 â†’ 5
3 â†’ 6
4 â†’ 0
5 â†’ 1
6 â†’ 2
```

ä½†å½“ä½ æ‰§è¡Œï¼š

```cpp
nums[3] = nums[0]; // nums[3] è¢«æ”¹æˆäº† 1
nums[4] = nums[1]; // nums[4] è¢«æ”¹æˆäº† 2
...
```

**è¿™æ ·åé¢è¯»å–çš„ `nums[j]` å·²ç»æ˜¯è¢«æ”¹è¿‡çš„äº†ï¼**

ä½ æƒ³è¦åŸºäºâ€œåŸæ•°ç»„â€çš„å€¼æ¥å†™æ–°ä½ç½®ï¼Œä½†ä½ å´ç›´æ¥å¯¹åŸæ•°ç»„è¯»å†™ï¼Œå¯¼è‡´æ•°æ®æ±¡æŸ“ã€‚

---

## âœ… è§£å†³æ–¹æ³•ä¸€ï¼šä½¿ç”¨ä¸´æ—¶æ•°ç»„ä¿å­˜åŸå€¼

```cpp
class Solution {
public:
    void rotate(vector<int>& nums, int k) {
        int n = nums.size();
        k %= n;
        if (k == 0) return;

        unordered_map<int, int> haha;
        for (int i = 0; i < n; ++i) {
            haha[i] = (i + k) % n;
        }

        vector<int> tmp(nums); // æ‹·è´ä¸€ä»½åŸå§‹æ•°æ®
        for (int j = 0; j < n; ++j) {
            nums[haha[j]] = tmp[j];
        }
    }
};
```

---

## âœ… æ›´ç®€æ´åšæ³•ï¼ˆæ¨èç”¨ vector è€Œä¸æ˜¯ mapï¼‰

å…¶å®ä½ ç”¨ map æ˜ å°„ä¸‹æ ‡çš„æ–¹å¼å¤ªå¤æ‚äº†ï¼Œç­‰ä»·äºè¿™ä¸ªï¼š

```cpp
vector<int> tmp(nums);
for (int i = 0; i < n; ++i) {
    nums[(i + k) % n] = tmp[i];
}
```

---

## âœ… æ›´ä¼˜è§£ï¼šä¸‰æ¬¡ç¿»è½¬æ³• æˆ– å¾ªç¯æ›¿æ¢æ³•ï¼ˆç©ºé—´ O(1)ï¼‰

ä¸Šé¢æ˜¯ç”¨æ¥ä¿®å¤ä½ å½“å‰ä»£ç é€»è¾‘çš„æœ€å°æ›´æ”¹ï¼Œä½†æ›´æ¨èä½ æŒæ¡ä¹‹å‰è®²çš„ä¸‰æ¬¡ç¿»è½¬æ³•æˆ–å¾ªç¯æ›¿æ¢æ³•ï¼Œå®ƒä»¬æ›´é«˜æ•ˆã€‚

---

éœ€è¦æˆ‘ç”¨ä½ å†™çš„æ–¹å¼è°ƒè¯• step-by-step ç»™ä½ æ‰“å°ç»“æœä¹Ÿå¯ä»¥ ğŸ˜„
